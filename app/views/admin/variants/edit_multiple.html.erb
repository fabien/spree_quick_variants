<%= render :partial => 'admin/shared/product_sub_menu' %>

<%= render :partial => 'admin/shared/product_tabs', :locals => {:current => "Variants"} %>

<%= form_tag :controller => 'admin/variants', :action => 'update_multiple' do %>
<table class="index">
  <tr>
    <th><%= t("options") %></th>
    <th><%= t("price") %></th>
    <th><%= t("cost_price") %></th>
    <% if Variant.column_names.include?('pre_discount_price') %>
    <th><%= t("pre_discount_price") %></th>
    <% end %>
    <th><%= t("sku") %></th>
    <th><%= t("on_hand") %></th>
    <th><%= t("action") %></th>
  </tr>
  <% @collection.each do |variant| %>
    <!-- you can skip variant with no options: that's just the default variant that all products have -->
    <% next if variant.option_values.empty? %>
    <tr id="<%= dom_id(variant) %>" <%= 'style="color:red;"' if variant.deleted? %>>
      <td><%= variant_options variant %></td>
      <td><%= text_field_tag "variants[#{variant.id}][price]", number_with_precision(variant.price, :precision => 2), :size => 5 %></td>
      <td><%= text_field_tag "variants[#{variant.id}][cost_price]", number_with_precision(variant.cost_price, :precision => 2), :size => 5 %></td>
      <% if Variant.column_names.include?('pre_discount_price') %>
      <td><%= text_field_tag "variants[#{variant.id}][pre_discount_price]", number_with_precision(variant.pre_discount_price, :precision => 2), :size => 5 %></td>
      <% end %>
      <td><%= text_field_tag "variants[#{variant.id}][sku]", variant.sku, :size => 24 %></td>
      <td><%= text_field_tag "variants[#{variant.id}][on_hand]", variant.on_hand, :size => 3 %></td>
      <td valign="top">
        <%= link_to_edit(variant) unless variant.deleted? %>
        &nbsp;
        <%= link_to_delete(variant) unless variant.deleted? %>
      </td>
    </tr>
  <% end %>
  <% unless @product.has_variants? %>
    <tr><td colspan="4"><%= t("none") %></td></tr>
  <% end %>
</table>
<%= render :partial => 'admin/shared/edit_resource_links' %>
<% end %>

<% if @product.options.empty? %>
<p class='first_add_option_types'>
  <%= t("to_add_variants_you_must_first_define") %>
  <%= link_to t("option_types"), selected_admin_product_option_types_url(@product) %>
</p>
<% end %>