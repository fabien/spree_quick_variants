<%= render :partial => 'admin/shared/product_sub_menu' %>

<%= render :partial => 'admin/shared/product_tabs', :locals => {:current => "Variants"} %>

<%= form_tag :controller => 'admin/variants', :action => 'update_multiple' do %>
<table class="index">
  <tr>
    <th width="40%"><%= t("options") %></th>
    <th width="20%"><%= t("price") %></th>
    <th width="20%"><%= t("cost_price") %></th>
    <% if Variant.column_names.include?('pre_discount_price') %>
    <th width="20%"><%= t("pre_discount_price") %></th>
    <% end %>
    <th width="20%"><%= t("sku") %></th>
    <th width="5%"><%= t("on_hand") %></th>
  </tr>
  <% @collection.each do |variant| %>
    <!-- you can skip variant with no options: that's just the default variant that all products have -->
    <% next if variant.option_values.empty? %>
    <tr id="<%= dom_id(variant) %>" <%= 'style="color:red;"' if variant.deleted? %>>
      <td width="40%"><%= variant_options variant %></td>
      <td width="10%"><%= text_field_tag "variants[#{variant.id}][price]", variant.price, :size => 5 %></td>
      <td width="10%"><%= text_field_tag "variants[#{variant.id}][cost_price]", variant.cost_price, :size => 5 %></td>
      <% if Variant.column_names.include?('pre_discount_price') %>
      <td width="10%"><%= text_field_tag "variants[#{variant.id}][pre_discount_price]", variant.pre_discount_price, :size => 5 %></td>
      <% end %>
      <td width="20%"><%= text_field_tag "variants[#{variant.id}][sku]", variant.sku, :size => 24 %></td>
      <td width="5%"><%= text_field_tag "variants[#{variant.id}][on_hand]", variant.on_hand, :size => 3 %></td>
    </tr>
  <% end %>
  <% unless @product.has_variants? %>
    <tr><td colspan="4"><%= t("none") %></td></tr>
  <% end %>
</table>
<%= render :partial => 'admin/shared/edit_resource_links' %>
<% end %>

<% if @product.options.empty? %>
<p class='first_add_option_types'>
  <%= t("to_add_variants_you_must_first_define") %>
  <%= link_to t("option_types"), selected_admin_product_option_types_url(@product) %>
</p>
<% end %>